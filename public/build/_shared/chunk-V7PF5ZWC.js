import{a as Ge,b as Ke,c as We,d as He}from"/build/_shared/chunk-VWROOQNV.js";import{b as qe,c as Je}from"/build/_shared/chunk-P2IKF2RS.js";import{a as _}from"/build/_shared/chunk-6O6YQVML.js";import{f as Ue}from"/build/_shared/chunk-WUZ43IXC.js";import{B as Be,h as De,i as Re,l as ze,u as Ar,y as Z,z as Me}from"/build/_shared/chunk-NAJNDA3G.js";import{a as ye,s as T}from"/build/_shared/chunk-3SQDOLIJ.js";import{d as w}from"/build/_shared/chunk-T36URGAI.js";var nr=w(ye(),1);var Xe=w(T(),1),$e=({className:e,type:r,...t})=>(0,Xe.jsx)("input",{"data-slot":"input",type:r,className:Z("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring aria-[invalid]:border-input-invalid flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-base file:font-medium focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 md:text-sm md:file:text-sm",e),...t});var Qe=w(ye(),1);var Ye=w(T(),1),Vr="Label",Ze=Qe.forwardRef((e,r)=>(0,Ye.jsx)(Ue.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Ze.displayName=Vr;var _e=Ze;var rr=w(T(),1),jr=qe("text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),er=({className:e,...r})=>(0,rr.jsx)(_e,{"data-slot":"label",className:Z(jr(),e),...r});var tr=w(Ar(),1);var A=w(T(),1),Se=({message:e,status:r,className:t,children:n,spinDelay:i,...a})=>{let o={pending:(0,tr.useSpinDelay)(r==="pending",{delay:400,minDuration:300,...i})?(0,A.jsx)("div",{role:"status",className:"inline-flex size-6 items-center justify-center",children:(0,A.jsx)(_,{name:"update",className:"animate-spin",title:"loading"})}):null,success:(0,A.jsx)("div",{role:"status",className:"inline-flex size-6 items-center justify-center",children:(0,A.jsx)(_,{name:"check",title:"success"})}),error:(0,A.jsx)("div",{role:"status",className:"bg-destructive inline-flex size-6 items-center justify-center rounded-full",children:(0,A.jsx)(_,{name:"cross-1",className:"text-destructive-foreground",title:"error"})}),idle:null}[r];return(0,A.jsxs)(Je,{className:Z("flex justify-center gap-4",t),...a,children:[(0,A.jsx)("div",{children:n}),e?(0,A.jsx)(Ge,{children:(0,A.jsxs)(Ke,{children:[(0,A.jsx)(We,{children:o}),(0,A.jsx)(He,{children:e})]})}):o]})};Se.displayName="Button";var k=w(T(),1);function gt({status:e,autoFocus:r=!1,autoSubmit:t=!1}){let n=(0,nr.useId)(),[i]=De(),a=Re(),u=Me({formMethod:"GET",formAction:"/users"}),o=Be(async s=>{await a(s)},400);return(0,k.jsxs)(ze,{method:"GET",action:"/users",className:"flex flex-wrap items-center justify-center gap-2",onChange:s=>t&&o(s.currentTarget),children:[(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)(er,{htmlFor:n,className:"sr-only",children:"Search"}),(0,k.jsx)($e,{type:"search",name:"search",id:n,defaultValue:i.get("search")??"",placeholder:"Search",className:"w-full",autoFocus:r})]}),(0,k.jsx)("div",{children:(0,k.jsxs)(Se,{type:"submit",status:u?"pending":e,className:"flex w-full items-center justify-center",children:[(0,k.jsx)(_,{name:"magnifying-glass",size:"md"}),(0,k.jsx)("span",{className:"sr-only",children:"Search"})]})})]})}function ir(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function N(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ir(Object(t),!0).forEach(function(n){Tr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ir(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Tr(e,r,t){return r=xr(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function kr(e,r){if(e==null)return{};var t={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(r.indexOf(i)>=0)&&(t[i]=e[i]);return t}function ar(e,r){if(e==null)return{};var t=kr(e,r),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function Lr(e,r){if(typeof e!="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function xr(e){var r=Lr(e,"string");return typeof r=="symbol"?r:String(r)}var R=w(ye(),1);function or(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?or(Object(t),!0).forEach(function(n){Cr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):or(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Cr(e,r,t){return r=Rr(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Dr(e,r){if(typeof e!="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Rr(e){var r=Dr(e,"string");return typeof r=="symbol"?r:String(r)}function X(e,r){if(!e)throw new Error(r)}function z(){return(Date.now()*Math.random()).toString(36)}function ee(e){return JSON.parse(JSON.stringify(e))}var J="__intent__",fe="__state__";function Ee(e){var r=e.get(J),t=e.get(fe);X((typeof r=="string"||r===null)&&(typeof t=="string"||t===null),'The input name "'.concat(J,'" and "').concat(fe,'" are reserved by Conform. Please use another name for your input.'));var n={payload:{},fields:new Set,intent:Br(r)};t&&(n.state=JSON.parse(t));var i=function(s){if(a===J||a===fe)return 1;n.fields.add(a),L(n.payload,a,c=>c?Array.isArray(c)?c.concat(s):[c,s]:s)};for(var[a,u]of e.entries())i(u);return n}function zr(e,r){var t=Ee(e),n=t.intent;if(n)switch(n.type){case"update":{var i=M(n.payload.name,n.payload.index),a=n.payload.value;typeof n.payload.value<"u"&&(i?L(t.payload,i,()=>a):t.payload=a);break}case"reset":{var u=M(n.payload.name,n.payload.index);u?L(t.payload,u,()=>{}):t.payload={};break}case"insert":case"remove":case"reorder":{Fe(t.payload,n);break}}var o=r.resolve(t.payload,n),s=c=>Mr(m(m({},t),{},{value:c.value,error:c.error}));return o instanceof Promise?o.then(s):s(o)}function Mr(e){return e.intent||!e.value||e.error?{status:e.intent?void 0:"error",payload:e.payload,error:typeof e.error<"u"?e.error:{},reply(r){return ur(e,r)}}:{status:"success",payload:e.payload,value:e.value,reply(r){return ur(e,r)}}}function ur(e){var r,t,n,i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if("resetForm"in a&&a.resetForm||((r=e.intent)===null||r===void 0?void 0:r.type)==="reset"&&((t=e.intent.payload.name)!==null&&t!==void 0?t:"")==="")return{initialValue:null};if("hideFields"in a&&a.hideFields)for(var u of a.hideFields){var o=K(e.payload,u);typeof o<"u"&&L(e.payload,u,()=>{})}var s="formErrors"in a||"fieldErrors"in a?G(m({"":(n=a.formErrors)!==null&&n!==void 0?n:null},a.fieldErrors)):null,c=e.error||s?m(m({},e.error),s):void 0,p=(i=G(e.payload,typeof document<"u"))!==null&&i!==void 0?i:{};return{status:e.intent?void 0:c?"error":"success",intent:e.intent?e.intent:void 0,initialValue:p,error:c,state:e.state,fields:Array.from(e.fields)}}function Br(e){if(!e)return null;var r=JSON.parse(e);if(typeof r.type!="string"||typeof r.payload>"u")throw new Error("Unknown form control intent");return r}function Oe(e){switch(e.type){case"insert":return JSON.stringify({type:e.type,payload:m(m({},e.payload),{},{defaultValue:re(e.payload.defaultValue)})});case"update":return JSON.stringify({type:e.type,payload:m(m({},e.payload),{},{value:re(e.payload.value)})});default:return JSON.stringify(e)}}function Pe(e,r){var t;switch(X(Array.isArray(e),"Failed to update list. The value is not an array."),r.type){case"insert":e.splice((t=r.payload.index)!==null&&t!==void 0?t:e.length,0,r.payload.defaultValue);break;case"remove":e.splice(r.payload.index,1);break;case"reorder":e.splice(r.payload.to,0,...e.splice(r.payload.from,1));break;default:throw new Error("Unknown list intent received")}}function Fe(e,r){L(e,r.payload.name,t=>{var n=t??[];return Pe(n,r),n})}var ge=Symbol.for("root");function de(e,r,t){var n=Object.keys(e).sort((s,c)=>c.localeCompare(s)),i={},a=function(){var c=e[u];x(u,r)&&u!==r&&(L(i,u,p=>typeof p>"u"?c:(p[ge]=c,p)),delete e[u])};for(var u of n)a();var o=t(K(i,r));Object.assign(e,ce(o,{resolve(s){if(C(s)||Array.isArray(s)){var c;return(c=s[ge])!==null&&c!==void 0?c:null}return s},prefix:r}))}function we(e,r,t){de(e,r.payload.name,n=>{var i=n??[];switch(r.type){case"insert":Pe(i,{type:r.type,payload:m(m({},r.payload),{},{defaultValue:t?.(r.payload.defaultValue)})});break;default:Pe(i,r);break}return i})}function re(e){return C(e)?Object.entries(e).reduce((r,t)=>{var[n,i]=t;return r[n]=re(i),r},{}):Array.isArray(e)?e.map(re):e instanceof Date?e.toISOString():typeof e=="boolean"?e?"on":void 0:typeof e=="number"||typeof e=="bigint"?e.toString():e??void 0}function Ie(e,r){var t=new FormData(e,r);if(r&&r.type==="submit"&&r.name!==""){var n=t.getAll(r.name);n.includes(r.value)||t.append(r.name,r.value)}return t}function I(e){return e?e.split(/\.|(\[\d*\])/).reduce((r,t)=>{if(typeof t<"u"&&t!==""&&t!=="__proto__"&&t!=="constructor"&&t!=="prototype")if(t.startsWith("[")&&t.endsWith("]")){var n=t.slice(1,-1);r.push(Number(n))}else r.push(t);return r},[]):[]}function D(e){return e.reduce((r,t)=>typeof t=="number"?"".concat(r,"[").concat(Number.isNaN(t)?"":t,"]"):r===""||t===""?[r,t].join(""):[r,t].join("."),"")}function M(e,r){return typeof r<"u"?D([...I(e),r]):e??""}function x(e,r){var t=I(e),n=I(r);return t.length>=n.length&&n.every((i,a)=>t[a]===i)}function lr(e,r){var t=typeof e=="string"?I(e):e,n=I(r);return n.length>=t.length&&t.every((i,a)=>n[a]===i)?n.slice(t.length):null}function L(e,r,t){for(var n=I(r),i=n.length,a=i-1,u=-1,o=e;o!=null&&++u<i;){var s=n[u],c=n[u+1],p=u!=a?Object.prototype.hasOwnProperty.call(o,s)&&o[s]!==null?o[s]:typeof c=="number"?[]:{}:t(o[s]);o[s]=p,o=o[s]}}function K(e,r){var t=e;for(var n of I(r)){if(typeof t>"u"||t==null)break;if(!Object.prototype.hasOwnProperty.call(t,n))return;if(C(t)&&typeof n=="string")t=t[n];else if(Array.isArray(t)&&typeof n=="number")t=t[n];else return}return t}function C(e){return!!e&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function te(e,r){var t=globalThis[r];return typeof t=="function"&&e instanceof t}function G(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(C(e)){var t=Object.keys(e).sort().reduce((n,i)=>{var a=G(e[i],r);return typeof a<"u"&&(n[i]=a),n},{});return Object.keys(t).length===0?void 0:t}if(Array.isArray(e))return e.length===0?void 0:e.map(n=>G(n,r));if(!(typeof e=="string"&&e===""||e===null||te(e,"File")&&(!r||e.size===0)))return e}function ce(e){var r,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={},i=(r=t.resolve)!==null&&r!==void 0?r:o=>o;function a(o,s){var c=G(i(o));if(typeof c<"u"&&(n[s]=c),Array.isArray(o))for(var p=0;p<o.length;p++)a(o[p],"".concat(s,"[").concat(p,"]"));else if(C(o))for(var[y,E]of Object.entries(o))a(E,s?"".concat(s,".").concat(y):y)}if(e){var u;a(e,(u=t.prefix)!==null&&u!==void 0?u:"")}return n}function Ve(e){return e.tagName==="INPUT"}function Ne(e){return e.tagName==="SELECT"}function sr(e){return e.tagName==="TEXTAREA"}function ie(e){if(e instanceof Element){if(Ve(e))return e.type!=="submit"&&e.type!=="button"&&e.type!=="reset";if(Ne(e)||sr(e))return!0}return!1}function fr(e){var r,t,n=e.target,i=e.submitter;return(r=(t=i?.getAttribute("formaction"))!==null&&t!==void 0?t:n.getAttribute("action"))!==null&&r!==void 0?r:"".concat(location.pathname).concat(location.search)}function dr(e){var r,t=e.target,n=e.submitter,i=(r=n?.getAttribute("formenctype"))!==null&&r!==void 0?r:t.enctype;return i==="multipart/form-data"?i:"application/x-www-form-urlencoded"}function cr(e){var r,t,n=e.target,i=e.submitter,a=(r=(t=i?.getAttribute("formmethod"))!==null&&t!==void 0?t:n.getAttribute("method"))===null||r===void 0?void 0:r.toUpperCase();switch(a){case"POST":case"PUT":case"PATCH":case"DELETE":return a}return"GET"}function vr(e,r){if(X(!!e,"Failed to submit the form. The element provided is null or undefined."),typeof e.requestSubmit=="function")e.requestSubmit(r);else{var t=new SubmitEvent("submit",{bubbles:!0,cancelable:!0,submitter:r});e.dispatchEvent(t)}}function Ae(e){var r=new DataTransfer;if(Array.isArray(e))for(var t of e)r.items.add(t);else r.items.add(e);return r.files}function ne(e){if(!(typeof e>"u")){if(e===null)return[];if(typeof e=="string")return[e];if(Array.isArray(e)&&e.every(r=>typeof r=="string"))return Array.from(e);throw new Error("Expected string or string[] value for string based input")}}function Ur(e){if(!(typeof e>"u")){if(e===null)return Ae([]);if(te(e,"File"))return Ae([e]);if(te(e,"FileList"))return e;if(Array.isArray(e)&&e.every(r=>te(r,"File")))return Ae(e);throw new Error("Expected File, FileList or File[] for file input")}}function je(e,r){var t;if(Ve(e))switch(e.type){case"file":{var n=Ur(r.value);n&&(e.files=n);return}case"checkbox":case"radio":{var i=ne(r.value),a=ne(r.defaultValue);if(i){var u=i.includes(e.value);(e.type==="checkbox"?u!==e.checked:u)&&e.click(),e.checked=u}a&&(e.defaultChecked=a.includes(e.value));return}}else if(Ne(e)){var o=ne(r.value),s=ne(r.defaultValue),c=o&&o.length===0;for(var p of e.options){if(o){var y=o.indexOf(p.value),E=y>-1;p.selected!==E&&(p.selected=E),E&&o.splice(y,1)}if(s){var O=s.indexOf(p.value),P=O>-1;p.defaultSelected!==P&&(p.defaultSelected=P),P&&s.splice(O,1)}}var j=new Set([...o??[],...s??[]]);for(var U of j)e.options.add(new Option(U,U,s?.includes(U),o?.includes(U)));c&&(e.selectedIndex=-1);return}var W=ne(r.value),me=ne(r.defaultValue),Q=(t=W?.[0])!==null&&t!==void 0?t:"";if(e.value!==Q){var{set:ue}=Object.getOwnPropertyDescriptor(e,"value")||{},be=Object.getPrototypeOf(e),{set:le}=Object.getOwnPropertyDescriptor(be,"value")||{};if(le&&ue!==le)le.call(e,Q);else if(ue)ue.call(e,Q);else throw new Error("The given element does not have a value setter")}if(me){var H;e.defaultValue=(H=me[0])!==null&&H!==void 0?H:""}}function pr(e){var r,t;if(Ve(e))switch(e.type){case"checkbox":case"radio":return e.checked!==e.defaultChecked;case"file":return((r=(t=e.files)===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0)>0;default:return e.value!==e.defaultValue}else{if(Ne(e))return Array.from(e.options).some(n=>n.selected!==n.defaultSelected);if(sr(e))return e.value!==e.defaultValue}return!1}function mr(e,r){var t,n,i,a,u,o=r?void 0:e.lastResult,s=e.defaultValue?re(e.defaultValue):{},c=(t=o?.initialValue)!==null&&t!==void 0?t:s,p={formId:e.formId,pendingIntents:r?[{type:"reset",payload:{}}]:[],isValueUpdated:!1,submissionStatus:o?.status,defaultValue:s,initialValue:c,value:c,constraint:(n=e.constraint)!==null&&n!==void 0?n:{},validated:(i=o==null||(a=o.state)===null||a===void 0?void 0:a.validated)!==null&&i!==void 0?i:{},key:r?m({"":z()},ve(s)):ve(s),error:(u=o?.error)!==null&&u!==void 0?u:{}};return br(p,o?.intent,o?.fields),p}function ve(e,r){return Object.entries(ce(e,{prefix:r})).reduce((t,n)=>{var[i,a]=n;if(Array.isArray(a))for(var u=0;u<a.length;u++)t[M(i,u)]=z();return t},{})}function yr(e,r){for(var t of Object.keys(e.error).concat(r??[]))e.validated[t]=!0}function br(e,r,t,n){var i;if(!r){yr(e,t);return}switch(r.type){case"validate":{r.payload.name?e.validated[r.payload.name]=!0:yr(e,t);break}case"update":{var{validated:a,value:u}=r.payload,o=M(r.payload.name,r.payload.index);typeof u<"u"&&gr(e,o??"",u),typeof a<"u"&&(o?de(e.validated,o,()=>{}):e.validated={},a?((C(u)||Array.isArray(u))&&Object.assign(e.validated,ce(u,{resolve(){return!0},prefix:o})),e.validated[o??""]=!0):o&&delete e.validated[o]);break}case"reset":{var s=M(r.payload.name,r.payload.index),c=K(e.defaultValue,s);gr(e,s,c),s?(de(e.validated,s,()=>{}),delete e.validated[s]):e.validated={};break}case"insert":case"remove":case"reorder":{n&&(e.initialValue=ee(e.initialValue),e.key=ee(e.key),we(e.key,r,y=>!Array.isArray(y)&&!C(y)?z():Object.assign(ve(y),{[ge]:z()})),Fe(e.initialValue,r)),we(e.validated,r),e.validated[r.payload.name]=!0;break}}var p=(i=t?.filter(y=>e.validated[y]))!==null&&i!==void 0?i:[];e.error=Object.entries(e.error).reduce((y,E)=>{var[O,P]=E;return(e.validated[O]||p.some(j=>x(O,j)))&&(y[O]=P),y},{})}function gr(e,r,t){if(r===""){e.initialValue=t,e.value=t,e.key=m(m({},ve(t)),{},{"":z()});return}e.initialValue=ee(e.initialValue),e.value=ee(e.value),e.key=ee(e.key),L(e.initialValue,r,()=>t),L(e.value,r,()=>t),(C(t)||Array.isArray(t))&&(de(e.key,r,()=>{}),Object.assign(e.key,ve(t,r))),e.key[r]=z()}function pe(e){var r={};return new Proxy(r,{get(t,n,i){var a;if(typeof n=="string")return(a=r[n])!==null&&a!==void 0?a:r[n]=e(n,i)}})}function Te(e){var r=G(e);return pe((t,n)=>{if(t==="")return r;var i=I(t),a=D(i.slice(0,-1)),u=D(i.slice(-1)),o=n[a];return K(o,u)})}function qr(e){return pe((r,t)=>{var n,i=e[r];if(!i){for(var a=I(r),u=a.length-1;u>=0;u--){var o=a[u];if(typeof o=="number"&&!Number.isNaN(o)){a[u]=Number.NaN;break}}var s=D(a);r!==s&&(i=t[s])}return(n=i)!==null&&n!==void 0?n:{}})}function Jr(e){return pe((r,t)=>{var n=e[r],i=I(r);if(i.length===0)return n;var a=t[D(i.slice(0,-1))];return typeof a>"u"?n:"".concat(a,"/").concat(n??i.at(-1))})}function Gr(e){return pe(r=>{var t=Object.keys(e);if(r==="")return t.length===0;for(var n of t)if(x(n,r)&&typeof e[n]<"u")return!1;return!0})}function Kr(e,r,t){return pe(n=>JSON.stringify(e[n])!==JSON.stringify(r[n],(i,a)=>n===""&&i===""&&a?Object.entries(a).reduce((u,o)=>{var[s,c]=o;return t(s)?Object.assign(u??{},{[s]:c}):u},void 0):a))}function ae(e,r,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:(O,P)=>JSON.stringify(O)!==JSON.stringify(P);if(n&&e!==r){var a,u,o=(a=n.prefix)!==null&&a!==void 0?a:[],s=(u=n.name)!==null&&u!==void 0?u:[],c=o.length===0?s:Array.from(new Set([...Object.keys(e),...Object.keys(r)])),p=function(P){if(o.length===0||s.includes(P)||o.some(U=>x(P,U))){var j;if((j=t[P])!==null&&j!==void 0||(t[P]=i(e[P],r[P])),t[P])return{v:!0}}},y;for(var E of c)if(y=p(E),y)return y.v}return!1}function ke(e){var r=[],t=e,n=new Set,i=mr(e),a=o(i);function u(){return document.forms.namedItem(t.formId)}function o(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l,f=arguments.length>2?arguments[2]:void 0,v=!f||d.defaultValue!==l.defaultValue?Te(l.defaultValue):f.defaultValue,h=l.initialValue===l.defaultValue?v:!f||d.initialValue!==l.initialValue?Te(l.initialValue):f.initialValue,g=l.value===l.initialValue?h:!f||d.value!==l.value?Te(l.value):f.value;return{submissionStatus:l.submissionStatus,pendingIntents:l.pendingIntents,defaultValue:v,initialValue:h,value:g,error:!f||d.error!==l.error?l.error:f.error,validated:l.validated,constraint:!f||d.constraint!==l.constraint?qr(l.constraint):f.constraint,key:!f||d.key!==l.key?Jr(l.key):f.key,valid:!f||d.error!==l.error?Gr(l.error):f.valid,dirty:!f||d.defaultValue!==l.defaultValue||d.value!==l.value?Kr(v,g,S=>{var b,F;return(b=(F=t.shouldDirtyConsider)===null||F===void 0?void 0:F.call(t,S))!==null&&b!==void 0?b:!0}):f.dirty}}function s(l){var d=i,f=a,v=o(l,d,f);i=l,a=v;var h={value:{},error:{},initialValue:{},key:{},valid:{},dirty:{}};for(var g of r){var S,b=(S=g.getSubject)===null||S===void 0?void 0:S.call(g);(!b||b.formId&&d.formId!==l.formId||b.status&&f.submissionStatus!==v.submissionStatus||b.pendingIntents&&d.pendingIntents!==l.pendingIntents||ae(f.error,v.error,h.error,b.error)||ae(f.initialValue,v.initialValue,h.initialValue,b.initialValue)||ae(f.key,v.key,h.key,b.key,(F,se)=>F!==se)||ae(f.valid,v.valid,h.valid,b.valid,c)||ae(f.dirty,v.dirty,h.dirty,b.dirty,c)||ae(f.value,v.value,h.value,b.value))&&g.callback()}}function c(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return l!==d}function p(){return JSON.stringify({validated:i.validated})}function y(l){var d=l.target,f=l.submitter;X(d===u(),"The submit event is dispatched by form#".concat(d.id," instead of form#").concat(t.formId));var v=Ie(d,f),h={formData:v,action:fr(l),encType:dr(l),method:cr(l)};if(typeof t?.onValidate>"u")return h;var g=t.onValidate({form:d,formData:v,submitter:f});if(g.status==="success"||g.error!==null){var S=g.reply();Q(m(m({},S),{},{status:S.status!=="success"?S.status:void 0}))}return m(m({},h),{},{submission:g})}function E(l){var d=u(),f=l.target;return!d||!ie(f)||f.form!==d||!f.form.isConnected||f.name===""?null:f}function O(l,d){var{shouldValidate:f="onSubmit",shouldRevalidate:v=f}=t,h=i.validated[l.name];return h?v===d&&(d==="onInput"||i.isValueUpdated):f===d}function P(l){var d=new FormData(l),f=Ee(d);s(m(m({},i),{},{isValueUpdated:!0,value:f.payload}))}function j(l){var d=E(l);!d||!d.form||(l.defaultPrevented||!O(d,"onInput")?P(d.form):H({type:"validate",payload:{name:d.name}}))}function U(l){var d=E(l);!d||l.defaultPrevented||!O(d,"onBlur")||H({type:"validate",payload:{name:d.name}})}function W(){n.clear(),s(mr(t,!0))}function me(l){var d=u();l.type!=="reset"||l.target!==d||l.defaultPrevented||W()}function Q(l){var d,f,v=u();if(!l.initialValue){W();return}var h=Object.entries((d=l.error)!==null&&d!==void 0?d:{}).reduce((F,se)=>{var[V,$]=se,q=$===null?i.error[V]:$;return q&&(F[V]=q),F},{}),g=l.intent?i.pendingIntents.filter(F=>!n.has(F)).concat(l.intent):i.pendingIntents,S=m(m({},i),{},{pendingIntents:g,isValueUpdated:!1,submissionStatus:l.status,value:l.initialValue,validated:m(m({},i.validated),(f=l.state)===null||f===void 0?void 0:f.validated),error:h});if(br(S,l.intent,l.fields,!0),s(S),v&&l.status==="error"){for(var b of v.elements)if(ie(b)&&i.error[b.name]){b.focus();break}}}function ue(l){var d=t.formId,f=t.lastResult;Object.assign(t,l),t.formId!==d?W():l.lastResult&&l.lastResult!==f&&Q(l.lastResult)}function be(l,d){var f={callback:l,getSubject:d};return r.push(f),()=>{r=r.filter(v=>v!==f)}}function le(){return a}function H(l){var d=u(),f=document.createElement("button"),v=Ce(l);f.name=v.name,f.value=v.value,f.hidden=!0,f.formNoValidate=!0,d?.appendChild(f),vr(d,f),d?.removeChild(f)}function Ce(l){return{name:J,value:Oe(l),form:t.formId,formNoValidate:!0}}function Y(l){var d=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return H({type:l,payload:v})};return Object.assign(d,{getButtonProps(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ce({type:l,payload:f})}})}function wr(){var l=new MutationObserver(d=>{var f=u();if(f)for(var v of d){var h=v.type==="childList"?[...v.addedNodes,...v.removedNodes]:[v.target];for(var g of h){var S=ie(g)?g:g instanceof HTMLElement?g.querySelector("input,select,textarea"):null;if(S?.form===f){P(f);return}}}});return l.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["form","name"]}),()=>{l.disconnect()}}function Ir(l){var d=u();if(d)for(var f of l){switch(f.type){case"update":{var v=M(f.payload.name,f.payload.index),h=I(v);for(var g of d.elements)if(ie(g)){var S=lr(h,g.name);if(S){var b=K(f.payload.value,D(S)),F=typeof b=="string"||Array.isArray(b)&&b.every(he=>typeof he=="string")?b:void 0;(typeof F<"u"||v===""&&S.length>1)&&(je(g,{value:F??null}),g.dataset.conform=z())}}break}case"reset":{var se=M(f.payload.name,f.payload.index);for(var V of d.elements)if(ie(V)&&V.name&&x(V.name,se)){var $=K(i.defaultValue,V.name),q=typeof $=="string"||Array.isArray($)&&$.every(he=>typeof he=="string")?$:void 0;if(typeof q>"u"&&!V.dataset.conform&&"defaultValue"in V&&!pr(V))continue;je(V,{defaultValue:q,value:q??null}),V.dataset.conform=z()}break}}n.add(f)}}return{getFormId(){return i.formId},submit:y,onReset:me,onInput:j,onBlur:U,onUpdate:ue,validate:Y("validate"),reset:Y("reset"),update:Y("update"),insert:Y("insert"),remove:Y("remove"),reorder:Y("reorder"),runSideEffect:Ir,subscribe:be,getState:le,getSerializedState:p,observe:wr}}var B=w(ye(),1),Wr=w(T(),1);var Hr=Symbol("wrapped");function hr(e,r){var t=(0,B.useCallback)(n=>e.subscribe(n,()=>r?.current),[e,r]);return(0,B.useSyncExternalStore)(t,e.getState,e.getState)}function Sr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=(0,B.useRef)(e);return r.current=e,r}function oe(e,r,t,n){if(r==="status"||r==="formId"||r==="pendingIntents")e.current[r]=!0;else if(typeof t<"u"&&typeof n<"u"){var i,a;e.current[r]=N(N({},e.current[r]),{},{[t]:((i=(a=e.current[r])===null||a===void 0?void 0:a[t])!==null&&i!==void 0?i:[]).concat(n)})}}function Pr(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",i=n?"".concat(e.getFormId(),"-").concat(n):e.getFormId(),a=e.getState();return new Proxy({id:i,name:n,errorId:"".concat(i,"-error"),descriptionId:"".concat(i,"-description"),get defaultValue(){var u=this.initialValue;if(typeof u=="string")return u;if(Array.isArray(u))return u[0]},get defaultOptions(){var u=this.initialValue;if(typeof u=="string")return[u];if(Array.isArray(u)&&u.every(o=>typeof o=="string"))return u},get defaultChecked(){if(this.initialValue==="on")return!0},get initialValue(){return a.initialValue[n]},get value(){return a.value[n]},get errors(){return a.error[n]},get key(){return a.key[n]},get valid(){return a.valid[n]},get dirty(){return a.dirty[n]},get allErrors(){if(n==="")return a.error;var u={};for(var[o,s]of Object.entries(a.error))x(o,n)&&(u[o]=s);return u},get getFieldset(){return()=>new Proxy({},{get(u,o,s){return typeof o=="string"?Le(e,r,t,n,o):Reflect.get(u,o,s)}})}},{get(u,o,s){if(a===t)switch(o){case"id":case"errorId":case"descriptionId":oe(r,"formId");break;case"key":case"initialValue":case"value":case"valid":case"dirty":oe(r,o,"name",n);break;case"errors":case"allErrors":oe(r,"error",o==="errors"?"name":"prefix",n);break}return Reflect.get(u,o,s)}})}function Le(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0,a=typeof i>"u"?n:D([...I(n),i]);return new Proxy({},{get(u,o,s){var c,p=Pr(e,r,t,a),y=e.getState();switch(o){case"formId":return y===t&&oe(r,"formId"),e.getFormId();case"required":case"minLength":case"maxLength":case"min":case"max":case"pattern":case"step":case"multiple":return(c=y.constraint[a])===null||c===void 0?void 0:c[o];case"getFieldList":return()=>{var E,O=(E=y.initialValue[a])!==null&&E!==void 0?E:[];if(y===t&&oe(r,"initialValue","name",a),!Array.isArray(O))throw new Error("The initial value at the given name is not a list");return Array(O.length).fill(0).map((P,j)=>Le(e,r,t,a,j))}}return Reflect.get(p,o,s)}})}function Er(e,r,t,n){return new Proxy({},{get(i,a,u){var o=Pr(e,r,t),s=e.getState();switch(a){case"context":return{[Hr]:e};case"status":return s===t&&oe(r,"status"),s.submissionStatus;case"validate":case"update":case"reset":case"insert":case"remove":case"reorder":return e[a];case"onSubmit":return e.submit;case"noValidate":return n}return Reflect.get(o,a,u)}})}function Or(e){var{onSubmit:r}=e,t=ke(e);return N(N({},t),{},{submit(n){var i=n.nativeEvent,a=t.submit(i);if(!a.submission||a.submission.status==="success"||a.submission.error===null){if(!a.formData.has(J)){var u;(u=r)===null||u===void 0||u(n,a)}}else n.preventDefault()},onUpdate(n){r=n.onSubmit,t.onUpdate(n)}})}var $r=["id"],xe=typeof document>"u"?R.useEffect:R.useLayoutEffect;function Xr(e){var r=(0,R.useId)();return e??r}function Qr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,[r,t]=(0,R.useState)(e);return xe(()=>{r||t(!0)},[r]),r}function Yr(e){var{id:r}=e,t=ar(e,$r),n=Xr(r),[i]=(0,R.useState)(()=>Or(N(N({},t),{},{formId:n})));xe(()=>{var c=i.observe();return document.addEventListener("input",i.onInput),document.addEventListener("focusout",i.onBlur),document.addEventListener("reset",i.onReset),()=>{c(),document.removeEventListener("input",i.onInput),document.removeEventListener("focusout",i.onBlur),document.removeEventListener("reset",i.onReset)}},[i]),xe(()=>{i.onUpdate(N(N({},t),{},{formId:n}))});var a=Sr({pendingIntents:!0}),u=hr(i,a),o=Qr(e.defaultNoValidate),s=Er(i,a,u,o);return(0,R.useEffect)(()=>{i.runSideEffect(u.pendingIntents)},[i,u.pendingIntents]),[s,s.getFieldset()]}function Fr(e){for(var r in e)e[r]===void 0&&delete e[r];return e}function Zr(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof r.ariaAttributes<"u"&&!r.ariaAttributes)return{};var n=r.ariaInvalid==="allErrors"?!e.valid:typeof e.errors<"u",i=r.ariaDescribedBy;return Fr({"aria-invalid":t&&n||void 0,"aria-describedby":n?"".concat(e.errorId," ").concat(i??"").trim():i})}function _r(e,r){return Fr(N({id:e.id,onSubmit:e.onSubmit,noValidate:e.noValidate},Zr(e,r)))}export{gt as a,zr as b,D as c,Yr as d,_r as e};
